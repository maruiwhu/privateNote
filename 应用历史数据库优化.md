---
title: 历史记录数据库优化
tags: Android
grammar_code: true
grammar_flow: true
---
## 历史记录数据库优化
> 我们应用有个功能是记录存储用户所有已安装的应用，我们的实现流程大致如下
> 1.应用中有两张表一张存放已安装应用列表package，表中存放已安装应用的包名，安装时间等信息，一张存放已同步的数据local_user_app存放已同步的应用包名，安装时间等
> 2.触发同步的时候查询package中的所有数据，然后再和local_user_app表中数据进行比较，是否需要同步，如果需要的话将数据取出，之后同步

#### 问题
之前的实现大概如下：
![enter description here][1] 
![enter description here][2]
这两个代码片段有部分问题：



  [1]: ./images/1513064109563.jpg
  [2]: ./images/1513064127433.jpg